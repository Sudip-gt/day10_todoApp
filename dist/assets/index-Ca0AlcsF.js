(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function e(n){if(n.ep)return;n.ep=!0;const t=i(n);fetch(n.href,t)}})();const y=document.getElementById("taskForm"),p=document.getElementById("taskInput");document.getElementById("taskList");const L=document.getElementById("todoList"),x=document.getElementById("doingList"),E=document.getElementById("doneList");L.dataset.status="todo";x.dataset.status="doing";E.dataset.status="done";let r=JSON.parse(localStorage.getItem("tasks"))||[];console.log(r);r.forEach(s=>{g(s.text,s.completed,s.taskStatus||"todo")});y.addEventListener("submit",function(s){s.preventDefault();const o=p.value.trim();if(o==="")return;if(r.some(e=>e.text.toLowerCase()===o.toLowerCase())){alert("Task already exists.");return}r.push({text:o,completed:!1,taskStatus:"todo"}),localStorage.setItem("tasks",JSON.stringify(r)),g(o,!1,"todo"),p.value=""});function g(s,o,i="todo"){const e=document.createElement("li");let n={todo:"border-red-500 text-red-500",doing:"border-yellow-500 text-yellow-500",done:"border-green-500 text-green-500"};e.className=`flex justify-between items-center p-2 border ${n[i]} rounded`,e.draggable=!0,e.dataset.text=s,e.dataset.taskStatus=i;const t=document.createElement("span");t.textContent=s;const a=document.createElement("button");a.textContent="Edit",a.className="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 mr-2",a.addEventListener("click",function(){const d=document.createElement("input");d.type="text",d.value=s,d.className="flex-1 mr-2 px-2 py-1 border border-gray-300 rounded",e.replaceChild(d,t),d.focus();const m=()=>{const c=d.value.trim();if(c===""||r.some(u=>u.text.toLowerCase()===c.toLowerCase()&&u.text.toLowerCase()!==s.toLowerCase())){alert("Invalid or duplicate task."),e.replaceChild(t,d);return}const f=r.findIndex(u=>u.text===s);f!==-1&&(r[f].text=c,localStorage.setItem("tasks",JSON.stringify(r))),t.textContent=c,s=c,e.dataset.text=c,e.replaceChild(t,d)};d.addEventListener("blur",m),d.addEventListener("keydown",function(c){c.key==="Enter"&&m()})});const l=document.createElement("button");l.textContent="Delete",l.className="px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",l.addEventListener("click",function(){e.remove(),r=r.filter(d=>d.text!==s),localStorage.setItem("tasks",JSON.stringify(r))}),e.appendChild(t),e.appendChild(a),e.appendChild(l),e.addEventListener("dragstart",d=>{d.dataTransfer.setData("text/plain",e.dataset.text)}),document.getElementById(`${i}List`).appendChild(e)}["todoList","doingList","doneList"].forEach(s=>{const o=document.getElementById(s),i=o.dataset.status;o.addEventListener("dragover",e=>{e.preventDefault(),o.classList.add("ring-2","ring-blue-400")}),o.addEventListener("dragleave",()=>{o.classList.remove("ring-2","ring-blue-400")}),o.addEventListener("drop",e=>{e.preventDefault(),o.classList.remove("ring-2","ring-blue-400");const n=e.dataTransfer.getData("text/plain"),t=[...document.querySelectorAll("li")].find(l=>l.dataset.text===n);if(!t)return;o.appendChild(t);const a=r.findIndex(l=>l.text===n);a!==-1&&(r[a].taskStatus=i,localStorage.setItem("tasks",JSON.stringify(r))),t.dataset.taskStatus=i})});
