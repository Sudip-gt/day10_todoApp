(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function e(o){if(o.ep)return;o.ep=!0;const t=a(o);fetch(o.href,t)}})();const y=document.getElementById("taskForm"),p=document.getElementById("taskInput"),x=document.getElementById("todoList"),L=document.getElementById("doingList"),b=document.getElementById("doneList");x.dataset.status="todo";L.dataset.status="doing";b.dataset.status="done";let s=JSON.parse(localStorage.getItem("tasks"))||[];console.log(s);s.forEach(r=>{g(r.text,r.completed,r.taskStatus||"todo")});y.addEventListener("submit",function(r){r.preventDefault();const n=p.value.trim();if(n==="")return;if(s.some(e=>e.text.toLowerCase()===n.toLowerCase())){alert("Task already exists.");return}s.push({text:n,completed:!1,taskStatus:"todo"}),localStorage.setItem("tasks",JSON.stringify(s)),g(n,!1,"todo"),p.value=""});function g(r,n,a="todo"){const e=document.createElement("li");let o={todo:"border-red-500 text-red-500",doing:"border-yellow-500 text-yellow-500",done:"border-green-500 text-green-500"};e.className=`flex justify-between items-center p-2 border ${o[a]} rounded`,e.draggable=!0,e.dataset.text=r,e.dataset.taskStatus=a;const t=document.createElement("span");t.textContent=r;const i=document.createElement("button");i.textContent="Edit",i.className="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 mr-2",i.addEventListener("click",function(){const d=document.createElement("input");d.type="text",d.value=r,d.className="flex-1 mr-2 px-2 py-1 border border-gray-300 rounded",e.replaceChild(d,t),d.focus();const m=()=>{const c=d.value.trim();if(c===""||s.some(u=>u.text.toLowerCase()===c.toLowerCase()&&u.text.toLowerCase()!==r.toLowerCase())){alert("Invalid or duplicate task."),e.replaceChild(t,d);return}const f=s.findIndex(u=>u.text===r);f!==-1&&(s[f].text=c,localStorage.setItem("tasks",JSON.stringify(s))),t.textContent=c,r=c,e.dataset.text=c,e.replaceChild(t,d)};d.addEventListener("blur",m),d.addEventListener("keydown",function(c){c.key==="Enter"&&m()})});const l=document.createElement("button");l.textContent="Delete",l.className="px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",l.addEventListener("click",function(){e.remove(),s=s.filter(d=>d.text!==r),localStorage.setItem("tasks",JSON.stringify(s))}),e.appendChild(t),e.appendChild(i),e.appendChild(l),e.addEventListener("dragstart",d=>{d.dataTransfer.setData("text/plain",e.dataset.text)}),document.getElementById(`${a}List`).appendChild(e)}["todoList","doingList","doneList"].forEach(r=>{const n=document.getElementById(r),a=n.dataset.status;n.addEventListener("dragover",e=>{e.preventDefault(),n.classList.add("ring-2","ring-blue-400")}),n.addEventListener("dragleave",()=>{n.classList.remove("ring-2","ring-blue-400")}),n.addEventListener("drop",e=>{e.preventDefault(),n.classList.remove("ring-2","ring-blue-400");const o=e.dataTransfer.getData("text/plain"),t=[...document.querySelectorAll("li")].find(l=>l.dataset.text===o);if(!t)return;n.appendChild(t);const i=s.findIndex(l=>l.text===o);i!==-1&&(s[i].taskStatus=a,localStorage.setItem("tasks",JSON.stringify(s))),t.dataset.taskStatus=a,v(t,a)})});function v(r,n){const a={todo:"border-red-500 text-red-500",doing:"border-yellow-500 text-yellow-500",done:"border-green-500 text-green-500"};r.className=`flex justify-between items-center p-2 border ${a[n]} rounded`}
